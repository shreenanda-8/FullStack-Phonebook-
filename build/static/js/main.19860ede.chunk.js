(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var r=t(17),c=t.n(r),a=t(6),u=t(3),o=t(2),i=t(5),l=t.n(i),d="/api/persons",s={getAll:function(){return l.a.get(d)},create:function(e){return l.a.post(d,e)},remove:function(e){return l.a.delete("".concat(d,"/").concat(e))},update:function(e){return l.a.put("".concat(d,"/").concat(e.id),e)}},b=t(0),f=function(e){var n=e.list,t=e.display,r=n.map((function(e,n){return{name:e.name,number:e.number,visible:t[n],id:e.id}}));if(r.length){var c=r.filter((function(e){return!0===e.visible})).map((function(n){return Object(b.jsxs)("p",{children:[n.name,"  ",n.number," ",Object(b.jsx)("button",{onClick:function(){return e.handleDeleteSender(n)},children:"Delete"})]},n.name)}));return Object(b.jsx)("div",{children:c})}return Object(b.jsx)(b.Fragment,{})},j=function(e){var n=e.searchField,t=e.handleSearchField;return Object(b.jsxs)("div",{children:["form shown with ",Object(b.jsx)("input",{value:n,onChange:t})]})},h=function(e){var n=e.newName,t=e.newNumber,r=e.handleNameSender,c=e.handleNumberSender,a=e.handleSubmitSender;return Object(b.jsxs)("form",{children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{value:n,onChange:function(e){return r(e)}})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{value:t,onChange:function(e){return c(e)}})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",onClick:function(e){return a(e)},children:"add"})})]})},m=function(e){var n=e.text,t=e.color,r={color:"".concat(t),background:"lightgrey",fontSize:"10px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return n?Object(b.jsx)("div",{style:r,children:Object(b.jsx)("h1",{children:n})}):Object(b.jsx)(b.Fragment,{})},O=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)([]),i=Object(u.a)(c,2),l=i[0],d=i[1],O=Object(o.useState)(null),p=Object(u.a)(O,2),v=p[0],x=p[1],g=Object(o.useState)(""),S=Object(u.a)(g,2),w=S[0],k=S[1],N=Object(o.useState)(""),y=Object(u.a)(N,2),C=y[0],D=y[1],F=Object(o.useState)(""),T=Object(u.a)(F,2),A=T[0],B=T[1],E=Object(o.useState)(""),J=Object(u.a)(E,2),L=J[0],z=J[1];Object(o.useEffect)((function(){var e=[];s.getAll().then((function(n){for(var t=0;t<n.data.length;t++)e.push(!0);d(e),r(n.data)})).catch((function(e){console.log({error:e.message})}))}),[]);return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(m,{text:v,color:w}),Object(b.jsx)(j,{searchField:L,handleSearchField:function(e){return function(e){e.preventDefault();var n=Object(a.a)(t);z(e.target.value);var r=Object(a.a)(l),c=n.map((function(n,t){return n.name.toLowerCase().includes(e.target.value.toLowerCase())?r[t]=!0:r[t]=!1,r[t]}));d(c)}(e)}}),Object(b.jsx)("h2",{children:"Add a new "}),Object(b.jsx)(h,{newNmae:A,newNumber:C,handleNameSender:function(e){return function(e){B(e.target.value)}(e)},handleNumberSender:function(e){return function(e){e.preventDefault(),D(e.target.value)}(e)},handleSubmitSender:function(e){return function(e){e.preventDefault();var n=Object(a.a)(t),c=Object(a.a)(l);if(n.map((function(e){return e.name})).includes(A)){if(window.confirm("".concat(A," is already added to phonebook, replace old number with new one?"))){var u=t.map((function(e){return e.name===A&&(e.number=C),e})),o=t.filter((function(e){return e.name===A}));o[0].number=C,s.update(o[0]).then((function(e){r(u),x("Changed the number of ".concat(A)),k("green"),setTimeout((function(){x(null)}),3e3)})).catch((function(e){for(var n=t,c=function(e){if(n[e].name===A){var c=l.filter((function(n,t){return t!==e})),a=t.filter((function(e){return e.name!==A}));r(a),d(c)}},a=0;a<t.length;a++)c(a);x("".concat(e.response.data.error)),k("red"),setTimeout((function(){x(null)}),3e3)}))}}else{var i={name:A,number:C};s.create(i).then((function(e){c.push(!0),n.push(e.data),r(n),d(c),x("Added ".concat(A)),k("green"),setTimeout((function(){x(null)}),3e3)})).catch((function(e){x("".concat(e.response.data.error)),k("red"),setTimeout((function(){x(null)}),3e3)}))}}(e)}}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)(f,{list:t,display:l,handleDeleteSender:function(e){return function(e){var n=t,c=l,a=n.map((function(e){return e.id}));window.confirm("Delete ".concat(e.name," ?"))&&s.remove(e.id).then((function(t){d(c.filter((function(e,n){return n!==a}))),r(n.filter((function(n){return n.id!==e.id})))})).catch((function(e){console.log({error:e.message}),x("".concat(e.response.data.error)),r(t),d(l),k("red"),setTimeout((function(){x(null)}),3e3)}))}(e)}})]})};c.a.render(Object(b.jsx)(O,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.19860ede.chunk.js.map