{"version":3,"sources":["servises/phone.js","App.js","index.js"],"names":["baseUrl","obj","getAll","axios","get","create","newObject","post","remove","id","delete","update","put","Persons","props","listOfPeople","list","listOfDisplayData","display","OverallInfo","map","info","index","name","number","visible","length","filter","onClick","handleDeleteSender","Filter","searchField","handleSearchField","value","onChange","PersonForm","newName","newNumber","handleNameSender","handleNumberSender","handleSubmitSender","event","type","Notification","text","color","notif","background","fontSize","borderStyle","borderRadius","padding","marginBottom","style","App","useState","persons","setPersons","setVisible","error","setError","setColor","setNewNumber","setNewName","setSearch","useEffect","disp","phoneServise","then","Info","i","data","push","catch","err","console","log","message","preventDefault","listPeople","target","listVisible","listToDisplay","toLowerCase","includes","handleSearchChange","newNmae","handleName","handleNumber","window","confirm","response","setTimeout","ind","handleSubmit","visibility","handleDelete","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.19860ede.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseUrl = \"/api/persons\"\r\n\r\nconst getAll = ()=>{\r\n    return axios.get(baseUrl)\r\n}\r\nconst create = newObject=>{\r\n    return axios.post(baseUrl, newObject)\r\n}\r\nconst remove = (id)=>{\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n}\r\nconst update = (newObject)=>{\r\n    return axios.put(`${baseUrl}/${newObject.id}`, newObject)\r\n}\r\nconst obj = {\r\n    getAll: getAll,\r\n    create: create,\r\n    remove: remove,\r\n    update: update\r\n}\r\nexport default obj","import React, { useEffect, useState } from 'react'\r\n\r\nimport phoneServise from './servises/phone.js'\r\nconst Persons = (props) => {\r\n\r\n    const listOfPeople = props.list\r\n    const listOfDisplayData = props.display\r\n    //  const uid = ()=>{\r\n    //         return Date.now().toString(36) + Math.random().toString(36).substr(2);\r\n    //     }\r\n    const OverallInfo = listOfPeople.map((info, index) => {\r\n        return { name: info.name, number: info.number, visible: listOfDisplayData[index], id: info.id }\r\n    })\r\n    if (OverallInfo.length) {\r\n        const curate = OverallInfo.filter((info) => {\r\n            return info.visible === true\r\n        })\r\n        const list = curate.map((info) => {\r\n\r\n            return <p key={info.name}>{info.name}  {info.number} <button onClick={() => props.handleDeleteSender(info)}>Delete</button></p>\r\n        })\r\n        return (\r\n            <div>\r\n                {\r\n                    list\r\n                }\r\n            </div>\r\n\r\n        )\r\n    }\r\n    else { return <></> }\r\n}\r\nconst Filter = ({ searchField, handleSearchField }) => {\r\n    return (\r\n        <div>\r\n            form shown with <input value={searchField} onChange={handleSearchField} />\r\n        </div>\r\n    )\r\n}\r\nconst PersonForm = ({ newName, newNumber, handleNameSender, handleNumberSender, handleSubmitSender }) => {\r\n    return (\r\n        <form >\r\n            <div>\r\n                name: <input value={newName} onChange={(event) => handleNameSender(event)} />\r\n            </div>\r\n            <div>number: <input value={newNumber} onChange={(event) => handleNumberSender(event)} /></div>\r\n            <div>\r\n                <button type=\"submit\" onClick={(event) => handleSubmitSender(event)}>add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\nconst Notification = ({ text, color }) => {\r\n    const notif = {\r\n        color: `${color}`,\r\n\r\n        background: \"lightgrey\",\r\n        fontSize: \"10px\",\r\n        borderStyle: \"solid\",\r\n        borderRadius: \"5px\",\r\n        padding: \"10px\",\r\n        marginBottom: \"10px\"\r\n    }\r\n    if (text) {\r\n        return (\r\n            <div style={notif}>\r\n                <h1>{text}</h1>\r\n            </div>\r\n        )\r\n\r\n    }\r\n    else {\r\n        return (<></>)\r\n    }\r\n\r\n}\r\nconst App = () => {\r\n    const [persons, setPersons] = useState([])\r\n    const [visible, setVisible] = useState([])\r\n    const [error, setError] = useState(null)\r\n    const [color, setColor] = useState('')\r\n    const [newNumber, setNewNumber] = useState('')\r\n    const [newName, setNewName] = useState('')\r\n    const [searchField, setSearch] = useState('')\r\n    useEffect(() => {\r\n\r\n        const disp = []\r\n\r\n        phoneServise.getAll()\r\n            .then((Info) => {\r\n\r\n\r\n                for (var i = 0; i < Info.data.length; i++) {\r\n                    disp.push(true)\r\n                }\r\n                setVisible(disp)\r\n                setPersons(Info.data)\r\n            })\r\n            .catch((err) => {\r\n                console.log({ error: err.message })\r\n            })\r\n\r\n\r\n\r\n\r\n    }, [])\r\n    const handleName = (event) => {\r\n\r\n        //I got an error about uncontrolled input and controlled input unitil I updated the state\r\n        setNewName(event.target.value)\r\n\r\n    }\r\n\r\n    const handleNumber = (event) => {\r\n        event.preventDefault()\r\n        setNewNumber(event.target.value)\r\n    }\r\n\r\n    const handleSubmit = (event) => {\r\n\r\n        event.preventDefault()\r\n        const listPeople = [...persons]\r\n        const listVisible = [...visible]\r\n        //Directly checking includes of an array of objects is not possible\r\n        const listNames = listPeople.map((info) => info.name)\r\n\r\n        if (listNames.includes(newName)) {\r\n            if (window.confirm(`${newName} is already added to phonebook, replace old number with new one?`)) {\r\n\r\n\r\n\r\n                const list = persons.map((info) => {\r\n                    if (info.name === newName) {\r\n                        info.number = newNumber\r\n                    }\r\n                    return info\r\n                })\r\n                const info = persons.filter((info) => info.name === newName)\r\n                info[0].number = newNumber\r\n\r\n                phoneServise.update(info[0])\r\n                    .then((response) => {\r\n\r\n                        setPersons(list)\r\n                        setError(`Changed the number of ${newName}`)\r\n                        setColor(\"green\")\r\n                        setTimeout(() => {\r\n                            setError(null)\r\n                        }, 3000)\r\n\r\n                    })\r\n                    .catch((err) => {\r\n                        const data = persons\r\n                        for (let i = 0; i < persons.length; i++) {\r\n\r\n                            if (data[i].name === newName) {\r\n\r\n                                const data = visible.filter((info, ind) => ind !== i)\r\n                                const list = persons.filter((info) => info.name !== newName)\r\n                                setPersons(list)\r\n                                setVisible(data)\r\n                            }\r\n                        }\r\n\r\n\r\n                        //The method to get the exact same error message from the backend:}\r\n                        setError(`${err.response.data.error}`)\r\n                        setColor(\"red\")\r\n                        setTimeout(() => {\r\n                            setError(null)\r\n                        }, 3000)\r\n\r\n                    })\r\n\r\n\r\n            }\r\n        }\r\n        else {\r\n            const data = { name: newName, number: newNumber }\r\n            phoneServise.create(data)\r\n                .then((response) => {\r\n                    listVisible.push(true)\r\n\r\n                    listPeople.push(response.data)\r\n                    setPersons(listPeople)\r\n                    setVisible(listVisible)\r\n                    setError(`Added ${newName}`)\r\n                    setColor(\"green\")\r\n                    setTimeout(() => {\r\n                        setError(null)\r\n                    }, 3000)\r\n                })\r\n                .catch((err) => {\r\n\r\n                    setError(`${err.response.data.error}`)\r\n                    setColor(\"red\")\r\n                    setTimeout(() => {\r\n                        setError(null)\r\n                    }, 3000)\r\n                })\r\n\r\n\r\n        }\r\n\r\n    }\r\n    const handleSearchChange = (event) => {\r\n        event.preventDefault()\r\n\r\n        const listPeople = [...persons]\r\n\r\n        setSearch(event.target.value)\r\n        const listVisible = [...visible]\r\n\r\n        const listToDisplay = listPeople.map((info, index) => {\r\n            var name = info.name.toLowerCase()\r\n            //Setting event.target.value works but searchField is not working it's always 1 step behind the time\r\n            //That's why better to use event.target.value\r\n\r\n            if (!name.includes(event.target.value.toLowerCase())) {\r\n\r\n                listVisible[index] = false\r\n\r\n            }\r\n            else {\r\n\r\n                listVisible[index] = true\r\n            }\r\n            return listVisible[index]\r\n        })\r\n\r\n        setVisible(listToDisplay)\r\n    }\r\n    const handleDelete = (Info) => {\r\n\r\n        const list = persons\r\n        const visibility = visible\r\n\r\n        const index = list.map((info) => info.id)\r\n        if (window.confirm(`Delete ${Info.name} ?`)) {\r\n            phoneServise.remove(Info.id)\r\n                .then((response) => {\r\n\r\n\r\n\r\n                    setVisible(visibility.filter((info, ind) => ind !== index))\r\n                    setPersons(list.filter((info) => info.id !== Info.id))\r\n\r\n                })\r\n                .catch((err) => {\r\n                    console.log({ error: err.message })\r\n\r\n                    setError(`${err.response.data.error}`)\r\n                    setPersons(persons)\r\n                    setVisible(visible)\r\n                    setColor('red')\r\n                    setTimeout(() => {\r\n                        setError(null)\r\n                    }, 3000)\r\n                })\r\n        }\r\n\r\n\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2>Phonebook</h2>\r\n            <Notification text={error} color={color} />\r\n            <Filter searchField={searchField} handleSearchField={(event) => handleSearchChange(event)} />\r\n\r\n            <h2>Add a new </h2>\r\n\r\n            <PersonForm\r\n                newNmae={newName}\r\n                newNumber={newNumber}\r\n                handleNameSender={(event) => handleName(event)}\r\n                handleNumberSender={(event) => handleNumber(event)}\r\n                handleSubmitSender={(event) => handleSubmit(event)}\r\n            />\r\n            <h2>Numbers</h2>\r\n            <Persons list={persons} display={visible} handleDeleteSender={(event) => handleDelete(event)} />\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App","import ReactDOM from 'react-dom'\r\nimport App from './App.js'\r\n\r\nReactDOM.render(\r\n  <App />, \r\n  document.getElementById('root')\r\n)\r\n\r\n\r\n"],"sourceRoot":""}